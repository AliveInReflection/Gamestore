@using GameStore.WebUI.Helpers;
@model GameStore.WebUI.Models.CommentViewModel

@{
    ViewBag.Title = "List";
    Layout = "~/Views/Shared/Layout.cshtml";
}

<h2>List</h2>

<div class="comment-block">
    @Html.BuildCommentsTree(Model.Comments, ViewBag.GameKey as string)
</div>

<div>
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        @Html.HiddenFor(m => m.GameKey)

        <fieldset>

            @Html.HiddenFor(m => m.NewComment.ParentCommentId)
            @Html.HiddenFor(m => m.NewComment.QuoteId)
            @Html.Hidden("gameKey", ViewBag.GameKey as string)

            <div class="editor-label">
                @Html.LabelFor(model => model.NewComment.UserName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.NewComment.UserName)
                @Html.ValidationMessageFor(model => model.NewComment.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.NewComment.Content)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.NewComment.Content)
                @Html.ValidationMessageFor(model => model.NewComment.Content)
            </div>

            <p>
                <input type="submit" value="Comment" />
            </p>
        </fieldset>
    }
</div>

<div id="dialog" title="Confirmation required">
    Delete this comment?
</div>


@section Scripts
{
    <script src="@Url.Content("~/Scripts/jquery-2.1.4.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Comment/Comment.js")"></script>
    <script src="@Url.Content("/Scripts/jquery-ui-1.11.4.min.js")"></script>
}

@section Styles
{
    <link rel="stylesheet" href="@Url.Content("/Scripts/jquery-ui-1.11.4/jquery-ui.min.css")"/>
}
